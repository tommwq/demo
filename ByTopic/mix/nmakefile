
objects=Byte.obj Word.obj Instrument.obj Mix.obj Main.obj Mix_instrument_set.obj Instrument_lda.obj Instrument_ldx.obj Instrument_ld_.obj Instrument_ldan.obj Instrument_ldxn.obj Instrument_ld_n.obj Instrument_sta.obj Instrument_stx.obj
unittests=Byte_test.exe Word_test.exe Instrument_lda_test.exe Instrument_sta_test.exe

all: mix.exe


mix.exe: $(objects)
	$(CXX) /Fe$@ $**


.cc.obj:
	$(CXX) /c /EHsc $? 

clean:
	del *.obj *.exe

unittest: $(unittests)
	Byte_test.exe
	Word_test.exe
	Instrument_lda_test.exe
	Instrument_sta_test.exe

Byte_test.exe: Byte_test.cc Byte.cc unittest.cc
	$(CXX) /EHsc /Fe$@ $**

Word_test.exe: Word_test.cc Word.cc unittest.cc Byte.cc
	$(CXX) /EHsc /Fe$@ $**

Instrument_lda_test.exe: Instrument_lda_test.cc Instrument.cc unittest.cc Byte.cc Instrument_lda.cc Word.cc
	$(CXX) /EHsc /Fe$@ $**

Instrument_sta_test.exe: Instrument_sta_test.cc Instrument.cc unittest.cc Byte.cc Instrument_sta.cc Word.cc
	$(CXX) /EHsc /Fe$@ $**
